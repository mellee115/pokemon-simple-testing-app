"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("goober"),n=require("react"),t=e(n),a=e(require("@rooks/use-outside-click"));function o(e,r){var n=e.length,t=r.length,a=[];if(!n||!t)return 0;if(n<t){var o=[r,e];e=o[0],r=o[1]}if(-1!==e.indexOf(r))return t+1/n;for(var i=0;i<=n;++i)a[i]=[0];for(var l=0;l<=t;++l)a[0][l]=0;for(var c=1;c<=n;++c)for(var s=1;s<=t;++s)a[c][s]=e[c-1]===r[s-1]?1+a[c-1][s-1]:Math.max(a[c][s-1],a[c-1][s]);return a[n][t]}function i(e,r){if(!e)return"";if(e=e.toUpperCase().replace(/((?=[^\u00E0-\u00FC])\W)|_/g,""),!r)return e;var n=r;return Object.keys(n).reduce((function(e,r){var t=new RegExp(r,"g");return e.replace(t,n[r])}),e)}var l={selectSomeItems:"Select...",allItemsAreSelected:"All items are selected.",selectAll:"Select All",search:"Search"};function c(e,r){return r&&r[e]?r[e]:l[e]}var s,d=r.css({"& input,& span":{verticalAlign:"middle",margin:0},span:{display:"inline-block",paddingLeft:"5px"},"&.disabled":{opacity:.5}}),u=function(e){var r=e.option,n=e.disabled;return t.createElement("div",{className:d+" item-renderer "+(n&&"disabled")},t.createElement("input",{type:"checkbox",onChange:e.onClick,checked:e.checked,tabIndex:-1,disabled:n}),t.createElement("span",null,r.label))},f=r.css({boxSizing:"border-box",cursor:"pointer",display:"block",padding:"var(--rmsc-spacing)",outline:"0","&:hover,&:focus":{background:"var(--rmsc-hover)"},"&.selected":{background:"var(--rmsc-selected)"}}),p=function(e){var r=e.itemRenderer,a=void 0===r?u:r,o=e.option,i=e.checked,l=e.focused,c=e.disabled,s=e.onSelectionChanged,d=e.onClick,p=n.useRef();n.useEffect((function(){v()}),[l]);var m=function(){s(!i)},v=function(){l&&!c&&p&&p.current.focus()};return t.createElement("label",{className:f+" select-item "+(i&&"selected"),role:"option","aria-selected":i,tabIndex:-1,ref:p,onKeyDown:function(e){switch(e.which){case 13:case 32:m();break;default:return}e.preventDefault()}},t.createElement(a,{option:o,checked:i,onClick:function(e){m(),d(e)},disabled:c}))},m=r.css({margin:0,paddingLeft:0,li:{listStyle:"none",margin:0}}),v=function(e){var r=e.value,n=e.onChange,a=e.disabled,o=e.ItemRenderer,i=e.focusIndex,l=e.onClick;return t.createElement("ul",{className:m},e.options.map((function(e,c){return t.createElement("li",{key:e.hasOwnProperty("key")?e.key:c},t.createElement(p,{focused:i===c,option:e,onSelectionChanged:function(t){return o=e,void(a||n(t?[].concat(r,[o]):r.filter((function(e){return e.value!==o.value}))));var o},checked:!!r.find((function(r){return r.value===e.value})),onClick:function(e){return l(e,c)},itemRenderer:o,disabled:e.disabled||a}))})))};!function(e){e[e.SEARCH=-1]="SEARCH",e[e.NONE=0]="NONE"}(s||(s={}));var h=r.css({width:"100%",borderBottom:"1px solid var(--rmsc-border)",input:{height:"var(--rmsc-height)",padding:"0 var(--rmsc-spacing)",width:"100%",outline:"none",border:"0"}}),g=function(e){var r=e.onChange,a=e.options,l=e.value,d=e.filterOptions,u=e.selectAllLabel,f=e.ItemRenderer,m=e.disabled,g=e.disableSearch,b=e.focusSearchOnOpen,x=e.hasSelectAll,k=e.overrideStrings,E=n.useState(""),y=E[0],w=E[1],S=n.useState(b?s.SEARCH:s.NONE),C=S[0],R=S[1],A=n.useState(),N=A[0],O=A[1],I={label:u||c("selectAll",k),value:""};n.useEffect((function(){O(D(!0).length)}),[a]);var D=function(e){var r=l.map((function(e){return e.value}));return a.filter((function(n){var t=n.disabled,a=n.value;return e?!t||r.includes(a):t&&r.includes(a)}))},L=function(e){return R(e)},H=function(e){var r=C+e;r=Math.max(0,r),r=Math.min(r,a.length),R(r)};return t.createElement("div",{className:"select-panel",role:"listbox",onKeyDown:function(e){switch(e.which){case 38:if(e.altKey)return;H(-1);break;case 40:if(e.altKey)return;H(1);break;default:return}e.stopPropagation(),e.preventDefault()}},!g&&t.createElement("div",{className:h},t.createElement("input",{autoFocus:b,placeholder:c("search",k),type:"search","aria-describedby":c("search",k),onChange:function(e){w(e.target.value),R(s.SEARCH)},onFocus:function(){R(s.SEARCH)}})),x&&!y&&t.createElement(p,{focused:0===C,checked:N===l.length,option:I,onSelectionChanged:function(e){var n=D(e);r(n)},onClick:function(){return L(0)},itemRenderer:f,disabled:m}),t.createElement(v,Object.assign({},e,{options:d?d(a,y):function(e,r,n){if(!r)return e;var t=i(r,void 0);return e.filter((function(e){return null!=e.label&&null!=e.value})).map((function(e){return{option:e,score:o(i(e.label,void 0),t)}})).filter((function(e){return e.score>=t.length-2})).sort((function(e,r){return r.score-e.score})).map((function(e){return e.option}))}(a,y),focusIndex:C-1,onClick:function(e,r){return L(r+1)},ItemRenderer:f,disabled:m})))};function b(e){var r=e.expanded;return t.createElement("span",{className:"dropdown-heading-dropdown-arrow gray",style:{paddingTop:"4px"}},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24"},void 0!==r&&r?t.createElement("polyline",{points:"18 15 12 9 6 15"}):t.createElement("path",{d:"M6 9L12 15 18 9"})))}var x=r.css({animation:"rotate 2s linear infinite","& .path":{stroke:"var(--rmsc-border)",strokeWidth:"4px",strokeLinecap:"round",animation:"dash 1.5s ease-in-out infinite"},"@keyframes rotate":{"100%":{transform:"rotate(360deg)"}},"@keyframes dash":{"0%":{strokeDasharray:"1, 150",strokeDashoffset:"0"},"50%":{strokeDasharray:"90, 150",strokeDashoffset:"-35"},"100%":{strokeDasharray:"90, 150",strokeDashoffset:"-124"}}});function k(e){var r=e.size,n=void 0===r?26:r;return t.createElement("div",{style:{cursor:"pointer",display:"table-cell",verticalAlign:"middle",width:n,marginRight:"0.2rem"}},t.createElement("svg",{width:n,height:n,className:x,viewBox:"0 0 50 50",style:{display:"inline-block",verticalAlign:"middle"}},t.createElement("circle",{cx:"25",cy:"25",r:"20",fill:"none",className:"path"})))}var E=r.css({position:"absolute",zIndex:1,top:"100%",width:"100%",paddingTop:"8px",".panel-content":{maxHeight:"300px",overflowY:"auto",borderRadius:"var(--rmsc-border-radius)",backgroundColor:"var(--rmsc-background)",boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"}}),y=r.css({position:"relative",outline:"none",backgroundColor:"var(--rmsc-background)",border:"1px solid var(--rmsc-border)",borderRadius:"var(--rmsc-border-radius)","&:focus-within":{boxShadow:"var(--rmsc-primary) 0px 0px 0px 1px",borderColor:"var(--rmsc-primary)"}}),w=r.css({position:"relative",padding:"0 var(--rmsc-spacing)",display:"flex",alignItems:"center",justifyContent:"flex-end",overflow:"hidden",width:"100%",height:"var(--rmsc-height)",cursor:"default",outline:"none",".dropdown-heading-value":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:"1"}}),S=function(e){var r=e.children,o=e.contentComponent,i=e.contentProps,l=e.isLoading,c=e.disabled,s=e.shouldToggleOnHover,d=e.labelledBy,u=e.onMenuToggle,f=e.ArrowRenderer,p=n.useState(!1),m=p[0],v=p[1],h=n.useState(!1),g=h[0],x=h[1],S=f||b,C=n.useRef();a(C,(function(){return v(!1)})),n.useEffect((function(){u&&u(m)}),[m]);var R=function(e){s&&v(e)};return t.createElement("div",{tabIndex:0,className:y+" dropdown-container","aria-labelledby":d,"aria-expanded":m,"aria-readonly":"true","aria-disabled":c,ref:C,onKeyDown:function(e){switch(e.which){case 27:case 38:v(!1);break;case 13:case 40:v(!0);break;default:return}e.preventDefault()},onFocus:function(e){e.target===C&&!g&&x(!0)},onBlur:function(){return g&&x(!1)},onMouseEnter:function(){return R(!0)},onMouseLeave:function(){return R(!1)}},t.createElement("div",{className:w+" dropdown-heading",onClick:function(){return v(!l&&!c&&!m)}},t.createElement("div",{className:"dropdown-heading-value"},r),l&&t.createElement(k,null),t.createElement(S,{expanded:m})),m&&t.createElement("div",{className:E+" dropdown-content"},t.createElement("div",{className:"panel-content"},t.createElement(o,Object.assign({},i)))))},C=function(e){var r=e.value,n=e.options,a=e.valueRenderer,o=e.overrideStrings,i=0===r.length,l=r.length===n.length,s=a&&a(r,n);return i?t.createElement("span",{className:"gray"},s||c("selectSomeItems",o)):t.createElement("span",null,s||(l?c("allItemsAreSelected",o):r.map((function(e){return e.label})).join(", ")))},R=r.css({"--rmscPrimary":"#4285f4","--rmscHover":"#f1f3f5","--rmscSelected":"#e2e6ea","--rmscBorder":"#ccc","--rmscGray":"#aaa","--rmscBackground":"#fff","--rmscSpacing":"10px","--rmscBorderRadius":"4px","--rmscHeight":"38px","*":{boxSizing:"border-box",transition:"all 0.2s ease"},".gray":{color:"var(--rmsc-gray)"}});exports.Dropdown=S,exports.SelectItem=p,exports.SelectPanel=g,exports.default=function(e){var r=e.focusSearchOnOpen,n=e.hasSelectAll,a=e.shouldToggleOnHover,o=e.className,i=e.options,l=e.overrideStrings,c=e.disabled,s=e.value||[];return t.createElement("div",{className:R+" "+(void 0===o?"multi-select":o)},t.createElement(S,{isLoading:e.isLoading,contentComponent:g,shouldToggleOnHover:void 0!==a&&a,contentProps:{ItemRenderer:e.ItemRenderer,options:i,value:s,hasSelectAll:void 0===n||n,selectAllLabel:e.selectAllLabel,onChange:e.onChange,disabled:c,disableSearch:e.disableSearch,focusSearchOnOpen:void 0===r||r,filterOptions:e.filterOptions,overrideStrings:l},disabled:c,labelledBy:e.labelledBy,onMenuToggle:e.onMenuToggle,ArrowRenderer:e.ArrowRenderer},t.createElement(C,{value:s,options:i,valueRenderer:e.valueRenderer,overrideStrings:l})))};
//# sourceMappingURL=react-multi-select-component.cjs.production.min.js.map
